&НаСервере
Функция ВернутьКолвоПредметов()
	Возврат 
Перечисления.ПеречислениеПредметыПоступленияАбитуриентов.Количество(); 
КонецФункции

Функция ВернутьЗначениеПредметаПоИндексу(индекс_номер)
	Возврат 
Перечисления.ПеречислениеПредметыПоступленияАбитуриентов.Получить(индекс_номер);
КонецФункции

//ФИКСАНУТЬ
Функция СоздатьДокументЗаявлениеНаПоступление()
	
	НовыйДокумент = 
Документы.ЗаявлениеНаПоступление.СоздатьДокумент();
	НовыйДокумент.ФИО = Объект.Наименование;
	НовыйДокумент.Дата = ТекущаяДата();
	НовыйДокумент.Заполнить();
	НовыйДокумент.Записать();	
	Возврат НовыйДокумент.Ссылка;
	
Конецфункции

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	Счетчик = 0;
	
 	Если (Объект.ОценкиАбитуриента.Количество() < 
ВернутьКолвоПредметов()) Тогда;
		Пока (Счетчик < ВернутьКолвоПредметов()) Цикл
			Новаястрока = 
Объект.ОценкиАбитуриента.Добавить();
			Новаястрока.Предмет = 
ВернутьЗначениеПредметаПоИндексу(Счетчик);
			Счетчик = Счетчик + 1;
		КонецЦикла;
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура ОценкиАбитуриентаПриИзменении(Элемент)
	СуммаЗначений = 0;
	КоличествоЗначений = 0;
	
	Для ЭйЭлементы = 0 По Объект.ОценкиАбитуриента.Количество()-1 
Цикл
		Если 
ЗначениеЗаполнено(Объект.ОценкиАбитуриента[ЭйЭлементы].Оценка) Тогда
			КоличествоЗначений = КоличествоЗначений + 1;
			СуммаЗначений = СуммаЗначений + 
Объект.ОценкиАбитуриента[ЭйЭлементы].Оценка;
		КонецЕсли;
	КонецЦикла;
	
	СреднееЗначение = СуммаЗначений / КоличествоЗначений;
	Объект.СреднийБаллАбитуриента = СреднееЗначение;		
	
КонецПроцедуры

&НаКлиенте
Процедура ПослеЗаписи(ПараметрыЗаписи)
	//КАК-ТО ВЫЗВАТЬ
	СсылкаНаДокумент = СоздатьДокументЗаявлениеНаПоступление();
	ОткрытьЗначение(СсылкаНаДокумент);
	
КонецПроцедуры

