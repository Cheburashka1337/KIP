&НаСервере
Функция СоздатьОтчетРодителейTelegram()
	Данные = 
Справочники.TelegramBot.НайтиПоНаименованию("MAIN_BOT");
	Сообщение = "<b>*Добавление нового родителя 
абитуриента*</b>"+Символы.ПС+Символы.ПС+
				"<b>Основная информация</b>"+Символы.ПС+
				"ФИО: "+Объект.Наименование+Символы.ПС+
				"Год рождения: 
"+Объект.ГодРождения+Символы.ПС+Символы.ПС+
				"<b>Дополнительная 
информация</b>"+Символы.ПС+
				"E-mail: "+Объект.Email+Символы.ПС+
				"Телефон: "+Объект.Телефон;
				
	Ресурс = "bot" + Данные.Токен  + 
"/sendMessage?chat_id="+Данные.ИдентификаторНазначения+"&text="+Сообщение+"&parse_mode=HTML";
	Соединение  =  Новый HTTPСоединение(Данные.Сервер,443,,,,,Новый 
ЗащищенноеСоединениеOpenSSL());
	Запрос = Новый HTTPЗапрос(Ресурс);
	Ответ = Соединение.Получить(Запрос);
	
	НовыйОтчетTelegram = Справочники.Уведомления.СоздатьЭлемент();
	НовыйОтчетTelegram.Событие = "Добавление родителя абитуриента";
	НовыйОтчетTelegram.Наименование = "Уведомление Telegram от 
"+ТекущаяДата();	
	НовыйОтчетTelegram.Сообщение = Сообщение;
	НовыйОтчетTelegram.ФИО = Объект.Наименование;
	НовыйОтчетTelegram.Идентификатор = 
Данные.ИдентификаторНазначения;
	НовыйОтчетTelegram.Дата = ТекущаяДата();
	НовыйОтчетTelegram.Записать();
	
	Возврат Ответ.КодСостояния;	
	
КонецФункции

&наСервере
Процедура ПроверкаОтчетTelegram()
	Если 
Справочники.Уведомления.НайтиПоРеквизиту("ФИО",Объект.Наименование).Пустая() 
Тогда
		СоздатьОтчетРодителейTelegram();
	КонецЕсли
КонецПроцедуры

&НаКлиенте
Процедура ПослеЗаписи(ПараметрыЗаписи)
	ПроверкаОтчетTelegram();
КонецПроцедуры

